{% extends "base.html" %}

{% load i18n %}

{% block content %}
  <div id="map_canvas" style="width:60%;height:400px;margin:0 auto;border:5px solid #313131"></div>
  <form id="contact" action="." method="post">{% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="{% trans 'Send' %}">
  </form>
  <div id="loading"><img src="{{ STATIC_URL }}images/loading-big.gif" alt=""></div>
{% endblock %}


{% block extra_js %}
  <link rel="stylesheet" href="{{ STATIC_URL }}css/validationEngine.jquery.css" type="text/css"/>
  <script src="{{ STATIC_URL }}js/jquery.validationEngine-{{ LANGUAGE_CODE }}.js" type="text/javascript"></script>
  <script src="{{ STATIC_URL }}js/jquery.validationEngine.js" type="text/javascript"></script>
  <script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
  <script src="{{ STATIC_URL }}js/jquery.ui.map.min.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(function() {
      $('#map_canvas').gmap({'center': '50.448579,30.456961', 'zoom': 16, 'disableDefaultUI':true, 'callback': function() {
        var self = this;
          self.addMarker({'position': this.get('map').getCenter() }).click(function() {
          self.openInfoWindow({ 'content': 'ФМФ!' });
        });
      }});
      $('#loading')
        .hide()  // hide it initially
        .ajaxStart(function() {
          $(this).show();
        })
        .ajaxStop(function() {
          $(this).hide();
        })
      ;
    });
  </script>
{% endblock %}